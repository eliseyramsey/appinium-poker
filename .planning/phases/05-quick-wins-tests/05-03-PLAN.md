---
phase: 05-quick-wins-tests
plan: 03
type: execute
wave: 1
depends_on: []
files_modified:
  - package.json
  - vitest.config.ts
  - vitest.setup.ts
  - tsconfig.json
autonomous: true
requirements: [TEST-01]

must_haves:
  truths:
    - "npm run test runs Vitest successfully"
    - "Testing library is configured for React components"
    - "Test file patterns match *.test.ts(x)"
  artifacts:
    - path: "vitest.config.ts"
      provides: "Vitest configuration"
      min_lines: 15
    - path: "vitest.setup.ts"
      provides: "Test environment setup"
      contains: "@testing-library/jest-dom"
    - path: "package.json"
      provides: "Test scripts"
      contains: "vitest"
  key_links:
    - from: "vitest.config.ts"
      to: "vitest.setup.ts"
      via: "setupFiles config"
      pattern: "setupFiles.*vitest.setup"
---

<objective>
Set up Vitest testing framework with React Testing Library.

Purpose: Enable unit and component testing for utils and UI components.
Output: Working test runner with npm run test command.
</objective>

<execution_context>
@/Users/eliseyramsey/.claude/get-shit-done/workflows/execute-plan.md
@/Users/eliseyramsey/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md

@package.json
@tsconfig.json
</context>

<tasks>

<task type="auto">
  <name>Task 1: Install Vitest and testing dependencies</name>
  <files>package.json</files>
  <action>
Install required packages:

```bash
npm install -D vitest @vitejs/plugin-react jsdom @testing-library/react @testing-library/jest-dom @testing-library/user-event
```

This installs:
- vitest: Test runner compatible with Vite
- @vitejs/plugin-react: React support for Vitest
- jsdom: DOM environment for tests
- @testing-library/react: React component testing utilities
- @testing-library/jest-dom: Custom matchers like toBeInTheDocument()
- @testing-library/user-event: User interaction simulation
  </action>
  <verify>
`npm ls vitest @testing-library/react` shows both packages installed
  </verify>
  <done>
All testing dependencies installed in devDependencies.
  </done>
</task>

<task type="auto">
  <name>Task 2: Configure Vitest</name>
  <files>vitest.config.ts, vitest.setup.ts, package.json, tsconfig.json</files>
  <action>
1. Create `vitest.config.ts` in project root:

```typescript
import { defineConfig } from 'vitest/config';
import react from '@vitejs/plugin-react';
import path from 'path';

export default defineConfig({
  plugins: [react()],
  test: {
    environment: 'jsdom',
    globals: true,
    setupFiles: ['./vitest.setup.ts'],
    include: ['**/*.test.{ts,tsx}'],
    exclude: ['node_modules', '.next', 'e2e'],
    coverage: {
      provider: 'v8',
      reporter: ['text', 'html'],
      include: ['lib/**/*.ts', 'components/**/*.tsx'],
      exclude: ['**/*.test.{ts,tsx}', '**/*.d.ts'],
    },
  },
  resolve: {
    alias: {
      '@': path.resolve(__dirname, './'),
    },
  },
});
```

2. Create `vitest.setup.ts` in project root:

```typescript
import '@testing-library/jest-dom/vitest';
```

3. Add test scripts to `package.json`:

```json
"scripts": {
  "test": "vitest",
  "test:run": "vitest run",
  "test:coverage": "vitest run --coverage"
}
```

4. Update `tsconfig.json` to include Vitest types:
   - Add "vitest/globals" to compilerOptions.types (create if needed)
   - Or add "types": ["vitest/globals"]

Actually, since globals: true in vitest.config, need to tell TypeScript:
- Create tsconfig.test.json or add to existing tsconfig.json:
  ```json
  "compilerOptions": {
    "types": ["vitest/globals", "@testing-library/jest-dom"]
  }
  ```
  </action>
  <verify>
1. Run `npm run test -- --run` (single run mode) - should complete without errors
2. Create a simple test file and verify it runs:
   ```typescript
   // lib/utils/__tests__/example.test.ts
   describe('example', () => {
     it('works', () => {
       expect(1 + 1).toBe(2);
     });
   });
   ```
3. Run `npm run test:run` - passes
  </verify>
  <done>
Vitest configured with jsdom environment, React Testing Library setup, @ alias working.
  </done>
</task>

</tasks>

<verification>
1. `npm run test` starts Vitest in watch mode
2. `npm run test:run` runs tests once and exits
3. Simple test file passes
4. No TypeScript errors in test files
5. Coverage report can be generated with `npm run test:coverage`
</verification>

<success_criteria>
- Test runner starts without errors
- React components can be imported in tests
- @testing-library/jest-dom matchers work (toBeInTheDocument, etc.)
- Path aliases (@/lib, @/components) resolve correctly
</success_criteria>

<output>
After completion, create `.planning/phases/05-quick-wins-tests/05-03-SUMMARY.md`
</output>
