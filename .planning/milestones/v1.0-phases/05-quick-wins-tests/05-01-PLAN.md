---
phase: 05-quick-wins-tests
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - app/game/[gameId]/not-found.tsx
  - app/game/[gameId]/page.tsx
  - components/issues/IssuesSidebar.tsx
autonomous: true
requirements: [QW-01, QW-05]

must_haves:
  truths:
    - "User sees friendly 404 page when accessing non-existent game"
    - "Issues sidebar shows helpful empty state with call-to-action"
  artifacts:
    - path: "app/game/[gameId]/not-found.tsx"
      provides: "Custom 404 page for invalid game IDs"
      min_lines: 20
    - path: "components/issues/IssuesSidebar.tsx"
      provides: "Improved empty state UI"
      contains: "illustration or icon"
  key_links:
    - from: "app/game/[gameId]/page.tsx"
      to: "not-found.tsx"
      via: "Next.js notFound() function"
      pattern: "notFound\\(\\)"
---

<objective>
Implement 404 Game Not Found page and improve Issues sidebar empty state.

Purpose: Better UX when users access invalid links or have no issues to estimate.
Output: Custom not-found.tsx page, improved IssuesSidebar empty state.
</objective>

<execution_context>
@/Users/eliseyramsey/.claude/get-shit-done/workflows/execute-plan.md
@/Users/eliseyramsey/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md

@app/game/[gameId]/page.tsx
@components/issues/IssuesSidebar.tsx
@app/api/games/[gameId]/route.ts
</context>

<tasks>

<task type="auto">
  <name>Task 1: Game Not Found page</name>
  <files>app/game/[gameId]/not-found.tsx, app/game/[gameId]/page.tsx</files>
  <action>
1. Create `app/game/[gameId]/not-found.tsx` with:
   - Centered layout with Appinium styling
   - Sad/empty illustration (use Lucide icon like `FileQuestion` or `Ghost`)
   - Heading: "Game Not Found"
   - Subtext: "This game doesn't exist or has been deleted"
   - Button: "Back to Home" linking to "/"
   - Use existing design system (--primary, --text-primary, Button component)

2. Update `app/game/[gameId]/page.tsx`:
   - Import `notFound` from 'next/navigation'
   - After loading game data (via useGameRealtime or initial fetch), if game is null after timeout, call `notFound()`
   - Note: Current implementation uses realtime hooks. Add a check after initial fetch or use a dedicated API check.

Alternative approach (simpler): Create a wrapper component that fetches game on mount and shows not-found if 404.

Keep it simple: Check if game doesn't exist after realtime loads (game === null && !isLoading) and show inline NotFound component instead of using Next.js notFound() for client-side handling.
  </action>
  <verify>
Navigate to `/game/nonexistent123` - should show custom 404 page with "Game Not Found" message and back button.
  </verify>
  <done>
Non-existent game URLs show friendly 404 page with branding and navigation back to home.
  </done>
</task>

<task type="auto">
  <name>Task 2: Improve Issues sidebar empty state</name>
  <files>components/issues/IssuesSidebar.tsx</files>
  <action>
Update the empty state in IssuesSidebar (currently line 190-192):

1. Replace plain text with richer visual:
   - Add Lucide icon (ListPlus, ClipboardList, or similar)
   - Heading: "No issues yet"
   - Subtext: Different for admin vs non-admin:
     - Admin: "Add your first issue above to start estimating"
     - Non-admin: "Waiting for admin to add issues"
   - Light gray background with dashed border
   - Centered layout with padding

2. Style consistently with rest of app (use CSS variables).

3. Keep the conditional: only show "Add one above!" hint if isPlayerAdmin.
  </action>
  <verify>
1. Join game as admin with no issues - see improved empty state with icon and admin-specific message
2. Join as non-admin with no issues - see "Waiting for admin" message
  </verify>
  <done>
Empty issues sidebar shows visually appealing state with contextual messaging based on user role.
  </done>
</task>

</tasks>

<verification>
1. Navigate to invalid game URL -> shows 404 page
2. Click "Back to Home" on 404 -> returns to landing
3. New game with no issues -> sidebar shows improved empty state
4. Admin sees "Add your first issue" prompt
5. Non-admin sees "Waiting for admin" message
6. No TypeScript errors: `npm run build` passes
</verification>

<success_criteria>
- 404 page displays for non-existent games
- Empty state is visually engaging with icon
- Role-specific messaging works correctly
- Design consistent with Appinium brand
</success_criteria>

<output>
After completion, create `.planning/phases/05-quick-wins-tests/05-01-SUMMARY.md`
</output>
